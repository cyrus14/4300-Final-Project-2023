{% extends 'base.html' %}

{% block title %} 
results
{% endblock %}

{% block body %}

<body>
    <div class="main"></div>
        <div class="full-body-container-2">

            <div class="header">
                <a href="/" onclick="goBack()"><span class="back">(‚áê back)</span></a>
                <h1 id="title-t">here's your playlist...</h1>
            </div>

            <div class="card-holder">
                {% for item in data %}
                    <div class='card'>
                        <div class='card-inner-flex'>
                            {% if data[item]['album_art'] == '' %}
                            <img class='album' src="{{ url_for('static', filename='images/placeholder-01.jpg') }}" alt='album art' />
                            {% else %}
                            <img class='album' src="{{ data[item]['album_art'] }}" alt='album art'></img>
                            {% endif %}
                            <div class='track'>
                                {% if data[item]['song_link'] == '' %}
                                <h1 class='card-title'>{{ data[item]['song'] }}</h1>
                                {% else %}
                                <h1 class='card-title'><a href="{{ data[item]['song_link'] }}">{{ data[item]['song'] }}</a></h1>
                                {% endif %}
                                <h3 class='card-artists'>
                                    {% if data[item][artists]|length == 1 %}
                                    {{ artist }}
                                    {% else %}
                                        {% for artist in data[item]['artists'] %}
                                        {{ artist }},
                                        {% endfor %}
                                    {% endif %}
                                </h3>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            
        </div>

    </div>
</body>

<script>
function goBack() {
  
  let searchParams = new URLSearchParams(window.location.search);
  let keyParam = searchParams.get('key');
  window.location.href = '/key='+keyParam
  console.log('Going back!');
  event.preventDefault();
}
</script>

{% endblock %}